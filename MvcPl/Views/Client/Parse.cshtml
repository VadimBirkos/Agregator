@model IEnumerable<Dal.Interface.PartyModel>
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css"/>
<div id="parse-view">
    <div id="parse-results-list">
        <ul id="list" title="Все предприятия">
            @foreach (var item in Model)
            {
                <li>
                    @item.Name
                    @item.Email
                    @if (item.Site != "Сайт отсутствует")
                    {
                        <a href="@item.Site">@item.Site</a>
                    }
                    else
                    {
                        @item.Site
                    }
                </li>
            }
        </ul>
    </div>
    Страница @((int)ViewBag.PageCount < (int)ViewBag.CurrentPage ? 0 : ViewBag.CurrentPage) из @ViewBag.PageCount
  
    <br/>
    <ul class="pagination">
        @if ((int)ViewBag.CurrentPage >= 2)
        {
            <li>
                <a href="#" aria-label="Previous" onclick="previousPage()">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
        }
        @for (var i = 0; i < (int)ViewBag.PageCount; i++)
        {
            if ((int)ViewBag.CurrentPage == i + 1)
            {
                <li value="@(i + 1)" id="current-page-item"><a>@(i + 1)</a></li>
                continue;
            }
            <li value="@(i + 1)" id="page-item"><a href="#" onclick="changePage(this.innerText)"> @(i + 1) </a></li>
        }
        @if ((int)ViewBag.CurrentPage < (int)ViewBag.PageCount - 1 && (int)ViewBag.PageCount > 1)
        {
            <li>
                <a href="#" aria-label="Next" onclick="nextPage()">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        }
    </ul>
</div>
<script>
    
    function nextPage() {
        changePage(( + $("#current-page-item")[0].value + 1));
    }

    function previousPage() {
        changePage(( + $("#current-page-item")[0].value - 1));
    }

    function changePage(page) {
        $("#parse-view").load('@Url.Action("Parse", "Client")', { page: page });
    }
</script>